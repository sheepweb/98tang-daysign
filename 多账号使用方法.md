# 98堂自动签到

本项目支持98堂论坛的自动签到功能，可以配合青龙面板等定时任务系统使用。

## 单账号使用方法

1. 从浏览器中导出Cookie信息（推荐使用`Copy as Node.js fetch`方式）
2. 设置以下环境变量之一:
   - `FETCH_98TANG`: 从浏览器复制的fetch格式数据
   - `CURL_98TANG`: 从浏览器复制的cURL格式数据
3. 设置定时任务运行`daysign.py`脚本

## 多账号使用方法

现已支持多账号同时签到，使用`multi_daysign.py`脚本可以依次为所有配置的账号执行签到操作。

### 1. 环境变量配置

需要设置以下格式的环境变量：

```
98ACCOUNT_1=你的第一个账号的fetch数据
98ACCOUNT_2=你的第二个账号的fetch数据
98ACCOUNT_3=你的第三个账号的fetch数据
```

其中`98ACCOUNT_`是固定前缀，后面的数字可以是任意标识（如1、2、3或a、b、c等），`fetch数据`与原脚本的`FETCH_98TANG`内容格式相同。

### 2. 文件部署

- 确保`daysign.py`和`multi_daysign.py`在同一目录下
- 多账号脚本会自动查找并调用同目录的`daysign.py`

### 3. 设置定时任务

只需要为`multi_daysign.py`设置定时任务，无需为`daysign.py`单独设置：

```bash
# 每天早上6点运行多账号签到
0 6 * * * python /path/to/multi_daysign.py
```

### 4. 运行方式

手动运行测试：
```bash
python multi_daysign.py
```

### 5. 执行间隔

为避免短时间内频繁请求导致IP被限制，多账号脚本在处理完一个账号后会随机等待10-20分钟再处理下一个账号。

可以根据需要修改脚本中的以下参数调整等待时间：
```python
MIN_INTERVAL = 600  # 最小等待时间(秒)
MAX_INTERVAL = 1200  # 最大等待时间(秒)
```

## 通知功能

本脚本支持Telegram通知，设置以下环境变量启用通知：
1. `TG_USER_ID`: Telegram用户ID
2. `TG_BOT_TOKEN`: Telegram机器人Token

## CloudFlare绕过 (可选)

如遇到CloudFlare防护，可设置以下环境变量：
1. `FLARESOLVERR_URL`: FlareSolverr服务地址
2. `FLARESOLVERR_PROXY`: 代理地址（可选）

## 其他说明

- 每个账号的执行日志会详细记录在控制台输出中
- 脚本会自动解决网站的验证码问题
- 默认会在帖子中发布一条随机评论，可通过`REPLY_TIMES_98TANG`环境变量控制评论次数
